# apply, map 을 활용한 데이터 변환
가지고 있는 데이터가 어떤 조건에 만족할 때, 그 값을 다른 값으로 바꾸어 주는 것
```
import pandas as pd

df = pd.DataFrame({'a' : [1, 2, 3, 4, 5]})
df
```
실행결과   
![](https://user-images.githubusercontent.com/64197543/152685825-61b97b78-aede-48f3-8f1a-0f54e813f722.PNG)


```
# 1. b 칼럼 정의
df['b'] = 0

# 2. 새로운 변수에 조건넣기
a = df[df['a'] < 2]

# 3. 조건이 저장된 변수의 인덱스를 가져온다
df['b'][a.index] = '2 미만'

# 4. 출력
df
```
실행결과   
![](https://user-images.githubusercontent.com/64197543/152685817-97861a2a-efa8-4feb-b883-603173b1f548.PNG)


```
a = df[(df['a'] >= 2) & (df['a'] < 4)]
df['b'][a.index] = '4 미만'         # 오류

# 오류 해결
pd.set_option('mode.chained_assignment',  None)
df['b'][a.index] = '4 미만'
df
```
실행결과   
![](https://user-images.githubusercontent.com/64197543/152685820-9c1497e3-ab62-4021-84e2-a4be69361f48.PNG)


### 함수 + apply 를 이용한 해결
```
def case_function(x):
    if x < 2:
        return '2 미만'
    elif x < 4:
        return '4 미만'
    else:
        return '4 이상'


df['c'] = df['a'].apply(case_function)

df
```
실행결과   
![](https://user-images.githubusercontent.com/64197543/152685821-50bc7f33-8195-4e93-ae06-84bf51d5182a.PNG)



### 문제
\- 문제 : a 가 1 이면 'one', 2 이면 'two', 3 이면 'three', 4 이면 'four', 5 이면 'five' 를 출력하는 칼럼 d 를 만드시오. (초기 표는 다음과 같다.)

![](https://user-images.githubusercontent.com/64197543/152685822-b6e0c267-8351-4d2e-9c19-307699af6731.PNG)


- 사용자 정의함수를 이용한 해결 방법
```
def function(x):
    if x == 1:
        return 'one'
    elif x == 2:
        return 'two'
    elif x == 3:
        return 'three'
    elif x == 4:
        return 'four'
    elif x == 5:
        return 'five'

df['d'] = df['a'].apply(function)

df
```
실행결과   
![](https://user-images.githubusercontent.com/64197543/152685824-d06c5512-b6dc-4a76-8a7f-b794332f7396.PNG)


- map을 이용한 해결 방법
```
a = { 1 : 'one', 2 : 'two', 3 : 'three', 4 : 'four', 5 : 'five'}

df['d'] = df['a'].map(a)

df
```
실행결과   
![](https://user-images.githubusercontent.com/64197543/152685824-d06c5512-b6dc-4a76-8a7f-b794332f7396.PNG)
